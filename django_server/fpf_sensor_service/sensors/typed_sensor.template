import json

from .typed_sensor import TypedSensor
from .sensor_description import SensorDescription, ConnectionType
from fpf_sensor_service.scripts_base import FieldDescription, FieldType

'''
This is a class template to add a new TypedSensor to the project, copy into a .py file and fill out.
The available types and enums for the sensor description are found in the sensor_description.py file,
expand as needed but remember to correctly serialize new requirements and also correctly support them in the frontend!
'''
class TypedSensorTemplate(TypedSensor):
    def init_additional_information(self):
        additional_information = json.loads(self.sensor_config.additionalInformation)
        # read fields from the additional information and store them in self

    @staticmethod
    def get_description() -> SensorDescription:
        return SensorDescription(
            script_class_id='<UUID>',
            model='',
            connection=ConnectionType.,
            parameter='',
            unit='',
            tags={
                'info': 'change or remove'
            },
            fields=[
                FieldDescription(
                    id='',
                    name='',
                    description='',
                    type=FieldType.,
                    rules=[
                      # add relevant rules here 
                    ]
                ),
            ]
        )

    def run(self, payload=None) -> any:
        # implement error retrieval here
        pass

